(this["webpackJsonplms-react-app"]=this["webpackJsonplms-react-app"]||[]).push([[52],{405:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a(10),r=a(12),i=a(11),l=a(0),o=a.n(l),c=a(71),u=a(73),m=a(72),d=a(74),p=a(244),h=a(21),f=a(63),v=a.n(f),E=a(23),g=a(64),b=a(16),x=a(22),C=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).createNotification=function(e,t){switch(e){case"info":g.NotificationManager.info(t,"",5e3);break;case"success":g.NotificationManager.success(t,"",5e3);break;case"warning":g.NotificationManager.warning(t,"",5e3);break;case"error":g.NotificationManager.error(t,"",5e3)}},s.state={isLoading:!1,name:"",description:"",isValid:{value:!1,text:""}},s}return Object(s.a)(a,[{key:"handleTextChange",value:function(e){this.setState({[e.name]:e.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.name,s=a.description;n||0!==n.trim().length?s||0!==s.trim().length?(this.setState({isLoading:!0}),v.a.post("".concat(E.a.prod,"/api/class/create"),{name:n.trim(),description:s.trim(),user_id:this.props.user.id}).then((function(e){t.setState({name:"",isLoading:!1}),t.props.history.push("faculty/class/list")})).catch((function(e){console.log("Error: ",e.response),t.setState({isLoading:!1}),e.response&&e.response.status&&(409===e.response.status||400===e.response.status||500===e.response.status)?500===e.response.status&&"SequelizeUniqueConstraintError"===e.response.data.error.name?t.setState({isValid:{value:!0,text:"Class with this name already exist",name:"server_error"}}):t.setState({isValid:{value:!0,text:e.response.data.msg,name:"server_error"}}):(t.setState({isValid:{value:!0,text:"Unknown Error",name:"server_error"}}),t.createNotification("error","Unknown Error"))}))):this.setState({isValid:{value:!0,text:"Please enter valid Class Description"}}):this.setState({isValid:{value:!0,text:"Please enter valid Class Name"}})}},{key:"render",value:function(){var e=this;return o.a.createElement(h.a,null,this.state.isLoading&&o.a.createElement(b.a,null),o.a.createElement(c.a,null,o.a.createElement(g.NotificationContainer,null),o.a.createElement(u.a,null,o.a.createElement(m.a,null,o.a.createElement(m.a.Header,null,o.a.createElement(m.a.Title,{as:"h5"},"Setup Class")),o.a.createElement(m.a.Body,null,o.a.createElement(c.a,null,o.a.createElement(d.a,{className:"col-md-12",onSubmit:function(t){return e.handleSubmit(t)}},o.a.createElement("fieldset",{disabled:this.state.isLoading,className:this.state.isLoading?"opacity-5":""},o.a.createElement(d.a.Row,null,o.a.createElement(u.a,{md:{span:8,offset:2}},o.a.createElement(d.a.Group,{className:"mb-2",controlId:"formBasicEmail"},o.a.createElement(d.a.Label,null,"Class Name"),o.a.createElement(d.a.Control,{type:"text",name:"name",placeholder:"Class Name",value:this.state.name,className:this.state.isValid.value&&"name"===this.state.isValid.name?"in-valid-input":"",onFocus:function(){return e.setState({isValid:{value:!1,text:""}})},onChange:function(t){return e.handleTextChange(t.target)}})))),o.a.createElement(d.a.Row,null,o.a.createElement(u.a,{md:{span:8,offset:2}},o.a.createElement(d.a.Group,{controlId:"exampleForm.ControlTextarea1"},o.a.createElement(d.a.Label,null,"Description"),o.a.createElement(d.a.Control,{as:"textarea",name:"description",rows:3,value:this.state.description,className:this.state.isValid.value&&"description"===this.state.isValid.name?"in-valid-input":"",onFocus:function(){return e.setState({isValid:{value:!1,text:""}})},onChange:function(t){return e.handleTextChange(t.target)}})))),o.a.createElement(d.a.Row,null,o.a.createElement(u.a,{md:{span:8,offset:2}},o.a.createElement("div",null,o.a.createElement(p.a,{type:"submit",style:{marginTop:"1.8rem",width:"100%"},variant:"primary"},"Submit"),this.state.isValid.value?o.a.createElement(d.a.Text,{style:{color:"red"}},this.state.isValid.text):"")))))))))))}}]),a}(o.a.Component);t.default=Object(x.b)((function(e){return{user:e.userDetails.user}}),null)(C)}}]);
//# sourceMappingURL=52.61ae61f0.chunk.js.map