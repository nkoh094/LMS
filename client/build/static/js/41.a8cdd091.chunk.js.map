{"version":3,"sources":["Demo/Faculty/Assignments/ListAssignments.js","../node_modules/react-bootstrap/esm/Table.js","../node_modules/js-file-download/file-download.js"],"names":["ListAssignment","props","componentDidMount","a","user","id","match","params","setState","class_id","getAssignmentList","createNotification","type","value","NotificationManager","info","success","warning","error","state","isLoading","downloadRowId","elem","showModal","handleCloseModal","isValid","text","data","title","this","e","assign","preventDefault","history","push","axios","get","config","prod","file","responseType","then","res","temp","split","fileDownload","length","response","catch","err","console","log","show","onHide","Header","closeButton","Title","Body","Footer","variant","onClick","handleDownload","cancelDownload","as","striped","bordered","hover","responsive","map","i","key","total_marks","Date","submission_date","toString","style","width","openDownloadModal","goToSubmissions","React","Component","connect","userDetails","Table","forwardRef","_ref","ref","bsPrefix","className","borderless","size","_objectWithoutPropertiesLoose","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","createElement","_extends","responsiveClass","module","exports","filename","mime","bom","blob","Blob","window","navigator","msSaveBlob","blobURL","URL","createObjectURL","webkitURL","tempLink","document","display","href","setAttribute","download","body","appendChild","click","setTimeout","removeChild","revokeObjectURL"],"mappings":"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","file":"static/js/41.a8cdd091.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Row, Col, Card, Button, Modal, Table } from 'react-bootstrap';\r\nimport Aux from \"../../../hoc/_Aux\";\r\nimport axios from 'axios';\r\nimport config from '../../../config';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport Loader from '../../../App/layout/Loader';\r\nimport { connect } from 'react-redux';\r\nimport fileDownload from 'js-file-download';\r\n\r\nclass ListAssignment extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            isLoading: false,\r\n            downloadRowId: null,\r\n            elem: {}, \r\n\t\t\tshowModal: false,\r\n\t\t\thandleCloseModal: false,\r\n            isValid: {\r\n                value: false,\r\n                text: ''   \r\n            },\r\n            data: [],\r\n            class_id: '',\r\n            title: ''\r\n        }\r\n    }\r\n\r\n    openDownloadModal(value) {\r\n\t\tthis.setState({ title: value.title, showModal: true, downloadRowId: value.id, elem: value });\r\n    }\r\n    \r\n\tcloseDownloadModal() {\r\n\t\tthis.setState({ showModal: false });\r\n    }\r\n    \r\n    goToSubmissions(e, assign) {\r\n        e.preventDefault();\r\n        this.props.history.push(`/faculty/class/${assign.class_id}/assignment/${assign.id}/submissions`);\r\n    }\r\n\r\n    handleDownload() {\r\n        this.setState({ showModal: false, isLoading: true });\r\n        axios.get(`${config.prod}/${this.state.elem.file}`, {\r\n            responseType: 'blob',\r\n          }).then(res => {\r\n            let temp = this.state.elem.file.split('.');\r\n            fileDownload(res.data, `${this.state.title}.${temp[temp.length-1]}`);\r\n            this.setState({ isLoading: false });\r\n          });\r\n    }\r\n\r\n\r\n    componentDidMount = async () => {\r\n        if (this.props && this.props.user && this.props.user.id && this.props.match && this.props.match.params && this.props.match.params.id) {\r\n            await this.setState({ class_id: this.props.match.params.id })\r\n            this.getAssignmentList();\r\n        }\r\n    }\r\n    \r\n    getAssignmentList() {\r\n        this.setState({ isLoading: true });\r\n\t\taxios.get(`${config.prod}/api/class/${this.state.class_id}/assignment/list`)\r\n\t\t\t.then(response => {\r\n\t\t\t\tthis.setState({ data: response.data.data, isLoading: false });\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tthis.setState({ isLoading: false });\r\n\t\t\t\tconsole.log('Error: getting data from db ', err.response);\r\n                this.createNotification('error', 'Error while Getting data from db');\r\n\t\t\t});\r\n    }\r\n\r\n    createNotification = (type, value) => {\r\n        switch (type) {\r\n            case 'info':\r\n                NotificationManager.info(value,'', 5000);\r\n                break;\r\n            case 'success':\r\n                NotificationManager.success(value, '', 5000);\r\n                break;\r\n            case 'warning':\r\n                NotificationManager.warning(value, '', 5000);\r\n                break;\r\n            case 'error':\r\n                NotificationManager.error(value, '', 5000);\r\n                break;\r\n            default: break;\r\n        }\r\n    };\r\n\r\n    cancelDownload() {\r\n\t\tthis.setState({ \r\n            showModal: false,\r\n\t\t\ttitle: ''\r\n\t\t});\r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <Aux>\r\n                {this.state.isLoading && <Loader />}\r\n\t\t\t    <Row>\r\n                    {this.state.showModal && \r\n                        <Modal show={this.state.showModal} onHide={() => this.setState({ showModal: false })}>\r\n                            <Modal.Header closeButton>\r\n                                <Modal.Title>Download Confirm</Modal.Title>\r\n                            </Modal.Header>\r\n                            <Modal.Body>Are you sure to want to download <b>{this.state.title}</b>?</Modal.Body>\r\n                            <Modal.Footer>\r\n                                <Button variant=\"primary\" onClick={() => this.handleDownload()}>\r\n                                    OK\r\n                                </Button>\r\n                                <Button variant=\"secondary\" onClick={() => this.cancelDownload()}>\r\n                                    Cancel\r\n                                </Button>\r\n                            </Modal.Footer>\r\n                        </Modal>\r\n                    }\r\n                    <NotificationContainer/>\r\n                    <Col>\r\n                        <Card>\r\n                            <Card.Header>\r\n                                <Card.Title as=\"h5\">Assignments List</Card.Title>\r\n                            </Card.Header>\r\n                            <Card.Body>\r\n                                <Row>\r\n                                    <Col>\r\n                                        <Table striped bordered hover responsive>\r\n                                            <thead>\r\n                                                <tr>\r\n                                                    <th>Title</th>\r\n                                                    <th>Total Marks</th>\r\n                                                    <th>Submission Date</th>\r\n                                                    <th>Actions</th>\r\n                                                </tr>\r\n                                            </thead>\r\n                                            <tbody>\r\n                                                {\r\n                                                    this.state.data.map((elem, i) => (\r\n                                                        <tr key={i}>\r\n                                                            <td>{elem.title}</td>\r\n                                                            <td>{elem.total_marks}</td>\r\n                                                            <td>{new Date(elem.submission_date).toString()}</td>\r\n                                                            <td>\r\n                                                                <Button style={{ width: '100%' }} onClick={(e) => this.openDownloadModal(elem)} variant='primary'>Download</Button>\r\n                                                                <br /><Button style={{ width: '100%' }} variant=\"outline-primary\" onClick={(e) => this.goToSubmissions(e, elem)}>Check Submissions</Button>\r\n                                                            </td>\r\n                                                        </tr>\r\n                                                    ))\r\n                                                }\r\n                                            </tbody>\r\n                                        </Table>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.userDetails.user\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, null)(ListAssignment);\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar Table = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      className = _ref.className,\n      striped = _ref.striped,\n      bordered = _ref.bordered,\n      borderless = _ref.borderless,\n      hover = _ref.hover,\n      size = _ref.size,\n      variant = _ref.variant,\n      responsive = _ref.responsive,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"className\", \"striped\", \"bordered\", \"borderless\", \"hover\", \"size\", \"variant\", \"responsive\"]);\n\n  var decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  var classes = classNames(className, decoratedBsPrefix, variant && decoratedBsPrefix + \"-\" + variant, size && decoratedBsPrefix + \"-\" + size, striped && decoratedBsPrefix + \"-striped\", bordered && decoratedBsPrefix + \"-bordered\", borderless && decoratedBsPrefix + \"-borderless\", hover && decoratedBsPrefix + \"-hover\");\n  var table = /*#__PURE__*/React.createElement(\"table\", _extends({}, props, {\n    className: classes,\n    ref: ref\n  }));\n\n  if (responsive) {\n    var responsiveClass = decoratedBsPrefix + \"-responsive\";\n\n    if (typeof responsive === 'string') {\n      responsiveClass = responsiveClass + \"-\" + responsive;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: responsiveClass\n    }, table);\n  }\n\n  return table;\n});\nexport default Table;","module.exports = function(data, filename, mime, bom) {\n    var blobData = (typeof bom !== 'undefined') ? [bom, data] : [data]\n    var blob = new Blob(blobData, {type: mime || 'application/octet-stream'});\n    if (typeof window.navigator.msSaveBlob !== 'undefined') {\n        // IE workaround for \"HTML7007: One or more blob URLs were\n        // revoked by closing the blob for which they were created.\n        // These URLs will no longer resolve as the data backing\n        // the URL has been freed.\"\n        window.navigator.msSaveBlob(blob, filename);\n    }\n    else {\n        var blobURL = (window.URL && window.URL.createObjectURL) ? window.URL.createObjectURL(blob) : window.webkitURL.createObjectURL(blob);\n        var tempLink = document.createElement('a');\n        tempLink.style.display = 'none';\n        tempLink.href = blobURL;\n        tempLink.setAttribute('download', filename);\n\n        // Safari thinks _blank anchor are pop ups. We only want to set _blank\n        // target if the browser does not support the HTML5 download attribute.\n        // This allows you to download files in desktop safari if pop up blocking\n        // is enabled.\n        if (typeof tempLink.download === 'undefined') {\n            tempLink.setAttribute('target', '_blank');\n        }\n\n        document.body.appendChild(tempLink);\n        tempLink.click();\n\n        // Fixes \"webkit blob resource error 1\"\n        setTimeout(function() {\n            document.body.removeChild(tempLink);\n            window.URL.revokeObjectURL(blobURL);\n        }, 200)\n    }\n}\n"],"sourceRoot":""}