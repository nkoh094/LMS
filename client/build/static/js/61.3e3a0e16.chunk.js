(this["webpackJsonplms-react-app"]=this["webpackJsonplms-react-app"]||[]).push([[61],{433:function(e,t,a){"use strict";a.r(t);var n=a(67),r=a.n(n),i=a(68),o=a(9),s=a(10),l=a(12),c=a(11),d=a(0),u=a.n(d),f=a(457),h=a(244),m=a(71),p=a(73),g=a(72),E=a(21),w=a(63),b=a.n(w),k=a(23),v=a(64),y=a(16),D=a(22),M=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).createNotification=function(e,t){switch(e){case"info":v.NotificationManager.info(t,"",5e3);break;case"success":v.NotificationManager.success(t,"",5e3);break;case"warning":v.NotificationManager.warning(t,"",5e3);break;case"error":v.NotificationManager.error(t,"",5e3)}},n.addInterest=function(){var e=Object(i.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!(n.state.ownData.length<3)){e.next=12;break}if(n.state.ownData.some((function(e){return e.interest_id===a.id}))){e.next=9;break}return e.next=6,n.setState({isLoading:!0});case 6:b.a.post("".concat(k.a.prod,"/api/user/interest/create"),{user_id:n.props.user.id,interest_id:a.id}).then((function(e){n.getInterestList()})).catch((function(e){n.setState({isLoading:!1}),console.log("Error: adding data into db ",e.response),n.createNotification("error","Error while adding interest into db")})),e.next=10;break;case 9:alert("Interest already Added.");case 10:e.next=13;break;case 12:alert("Max interest length reached.");case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.state={isLoading:!1,deletedRowId:null,showModal:!1,handleCloseModal:!1,isValid:{value:!1,text:""},data:[],ownData:[],dataToAdd:[],dataToDelete:[]},n}return Object(s.a)(a,[{key:"openDeleteModal",value:function(e){this.setState({status:!0,showModal:!0,deletedRowId:e.id})}},{key:"closeDeleteModal",value:function(){this.setState({showModal:!1})}},{key:"handleDelete",value:function(){var e=this;this.setState({showModal:!1,isLoading:!0}),b.a.delete("".concat(k.a.prod,"/api/user/interest/delete"),{data:{interest_id:this.state.deletedRowId}}).then((function(t){e.createNotification("success","Interest Deleted Successfully"),e.getInterestList()})).catch((function(t){e.setState({isLoading:!1}),console.log("Error: deleting data from db ",t.response),e.createNotification("error","Error while deleting data from db")}))}},{key:"componentDidMount",value:function(){this.getInterestList()}},{key:"getInterestList",value:function(){var e=this;this.setState({isLoading:!0});var t=[];t.push(b.a.get("".concat(k.a.prod,"/api/interest/list"))),t.push(b.a.get("".concat(k.a.prod,"/api/interest/").concat(this.props.user.id,"/list"))),Promise.all(t).then((function(t){e.setState({data:t[0].data.data,ownData:t[1].data.data,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.log("Error: getting data from db ",t.response),e.createNotification("error","Error while Getting data from db")}))}},{key:"cancelDelete",value:function(){this.setState({isEdit:!1,showModal:!1,name:""})}},{key:"render",value:function(){var e=this;return u.a.createElement(E.a,null,this.state.isLoading&&u.a.createElement(y.a,null),this.state.showModal&&u.a.createElement(f.a,{show:this.state.showModal,onHide:function(){return e.setState({showModal:!1})}},u.a.createElement(f.a.Header,{closeButton:!0},u.a.createElement(f.a.Title,null,"Delete Confirm")),u.a.createElement(f.a.Body,null,"Are you sure to want to delete?"),u.a.createElement(f.a.Footer,null,u.a.createElement(h.a,{variant:"primary",onClick:function(){return e.handleDelete()}},"OK"),u.a.createElement(h.a,{variant:"secondary",onClick:function(){return e.cancelDelete()}},"Cancel"))),u.a.createElement("fieldset",{disabled:this.state.isLoading,className:this.state.isLoading?"opacity-5":""},u.a.createElement(m.a,null,u.a.createElement(v.NotificationContainer,null),u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement(g.a.Header,null,u.a.createElement(g.a.Title,{as:"h5"},"Your Interests")),u.a.createElement(g.a.Body,null,u.a.createElement(m.a,null,this.state.ownData.map((function(t){return u.a.createElement(h.a,{variant:"outline-success",onClick:function(){return e.openDeleteModal(t)},key:t.id,className:"mr-2 mt-2"},t.interest.name)}))))))),u.a.createElement(m.a,null,u.a.createElement(p.a,null,u.a.createElement(g.a,null,u.a.createElement(g.a.Header,null,u.a.createElement(g.a.Title,{as:"h5"},"Interest List")),u.a.createElement(g.a.Body,null,u.a.createElement(m.a,null,u.a.createElement(p.a,null,this.state.data.map((function(t){return u.a.createElement(h.a,{variant:"outline-warning",key:t.id,onClick:function(a){return e.addInterest(a,t)},className:"mr-2 mt-2"},t.name)}))))))))))}}]),a}(u.a.Component);t.default=Object(D.b)((function(e){return{user:e.userDetails.user}}),null)(M)}}]);
//# sourceMappingURL=61.3e3a0e16.chunk.js.map