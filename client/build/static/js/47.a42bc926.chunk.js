(this["webpackJsonplms-react-app"]=this["webpackJsonplms-react-app"]||[]).push([[47],{399:function(e,t,a){"use strict";a.r(t);var n=a(67),r=a.n(n),s=a(68),i=a(9),l=a(10),u=a(12),c=a(11),o=a(0),d=a.n(o),m=a(71),p=a(73),h=a(72),f=a(74),E=a(244),g=a(22),y=a(21),b=a(64),v=a(16),S=a(63),x=a.n(S),k=a(23),N=a(105),V=function(e){Object(u.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).createNotification=function(e,t){switch(e){case"info":b.NotificationManager.info(t,"",5e3);break;case"success":b.NotificationManager.success(t,"",5e3);break;case"warning":b.NotificationManager.warning(t,"",5e3);break;case"error":b.NotificationManager.error(t,"",5e3)}},n.handleSubmit=function(){var e=Object(s.a)(r.a.mark((function e(t){var a,i,l,u,c,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,i=a.u_id,l=a.status,i&&0!==i.trim().length){e.next=5;break}return n.setState({isValid:{value:!0,text:"Please enter valid Student/Faculty ID",name:"u_id"}}),e.abrupt("return");case 5:if(u=i.trim(),c=/^[A-Z]/,o=/^\d+$/,!(u.length<9||u.length>9||"U"!==u.charAt(0))&&c.test(u.charAt(8))&&o.test(u.substr(1,7))){e.next=11;break}return n.setState({isValid:{value:!0,text:"Please enter valid Student/Faculty ID",name:"u_id"}}),e.abrupt("return");case 11:return e.next=13,n.setState({isLoading:!0});case 13:x.a.post("".concat(k.a.prod,"/api/verify/identity"),{u_id:u,id:n.props.user.id,role:l?"user":"faculty"}).then(function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.createNotification("success","Identity Verified Successfully"),e.next=3,localStorage.setItem("lms-token",t.data.token);case 3:return e.next=5,n.props.signIn(t.data.user);case 5:return e.next=7,n.setState({isLoading:!1});case 7:"user"===t.data.user.role?n.props.history.push("/interests"):n.props.history.push("/home");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("Error: ",e.response),n.setState({isLoading:!1}),e.response&&e.response.status&&(409===e.response.status||400===e.response.status||500===e.response.status)?(n.setState({isValid:{value:!0,text:e.response.data.msg}}),n.createNotification("error",e.response.data.msg)):(n.setState({isValid:{value:!0,text:"Unknown Error"}}),n.createNotification("error","Unknown Error"))}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={isLoading:!1,u_id:"",status:!0,isValid:{value:!1,text:"",name:""}},n}return Object(l.a)(a,[{key:"handleTextChange",value:function(e){this.setState({u_id:e})}},{key:"render",value:function(){var e=this;return d.a.createElement(y.a,null,this.state.isLoading&&d.a.createElement(v.a,null),d.a.createElement(m.a,null,d.a.createElement(b.NotificationContainer,null),d.a.createElement(p.a,null,d.a.createElement(h.a,null,d.a.createElement(h.a.Header,null,d.a.createElement(h.a.Title,{as:"h5"}," Verify Your Identity ")),d.a.createElement(h.a.Body,null,d.a.createElement(h.a.Text,null,d.a.createElement("b",null,"Note: ")," Your'e seeing this page because your identity is not verified.",d.a.createElement("br",null),"Please verify your Identity to proceed in the LMS."),d.a.createElement(m.a,null,d.a.createElement(f.a,{className:"col-md-12",onSubmit:function(t){return e.handleSubmit(t)}},d.a.createElement("fieldset",{disabled:this.state.isLoading,className:this.state.isLoading?"opacity-5":""},d.a.createElement(f.a.Row,null,d.a.createElement(p.a,{md:4,lg:5},d.a.createElement(f.a.Group,{className:"mb-2",controlId:"formBasicEmail"},d.a.createElement(f.a.Label,null,"Student/Faculty ID"),d.a.createElement(f.a.Control,{type:"text",name:"u_id",placeholder:"Your Student/Faculty ID",value:this.state.u_id,className:this.state.isValid.value&&"u_id"===this.state.isValid.name?"in-valid-input":"",onFocus:function(){return e.setState({isValid:{value:!1,text:""}})},onChange:function(t){return e.handleTextChange(t.target.value)}}),this.state.isValid.value&&"u_id"===this.state.isValid.name?d.a.createElement(f.a.Text,{style:{color:"red"}},this.state.isValid.text):"")),d.a.createElement(p.a,{md:4,lg:3},d.a.createElement(f.a.Group,{className:"mb-2",controlId:"status"},d.a.createElement("div",null," ",d.a.createElement(f.a.Label,null,"Type")," "),d.a.createElement("div",{className:"rg-pad"},d.a.createElement(f.a.Check,{inline:!0,custom:!0,type:"radio",checked:this.state.status,onChange:function(){return e.setState({status:!0})},label:"Student",name:"student",id:"supportedRadio21"}),d.a.createElement(f.a.Check,{inline:!0,custom:!0,type:"radio",label:"Faculty",checked:!this.state.status,onChange:function(){return e.setState({status:!1})},name:"faculty",id:"supportedRadio22"})))),d.a.createElement(p.a,{md:4,lg:4},d.a.createElement("div",{style:{padding:"4px 20px"}},d.a.createElement(E.a,{type:"submit",className:"mt-4",variant:"primary"},"Submit"))))))))))))}}]),a}(d.a.Component);t.default=Object(g.b)((function(e){return{user:e.userDetails.user}}),N)(V)}}]);
//# sourceMappingURL=47.a42bc926.chunk.js.map