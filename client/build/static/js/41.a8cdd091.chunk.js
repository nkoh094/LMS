(this["webpackJsonplms-react-app"]=this["webpackJsonplms-react-app"]||[]).push([[41],{423:function(e,t,a){"use strict";a.r(t);var n=a(67),o=a.n(n),r=a(68),s=a(9),l=a(10),i=a(12),c=a(11),d=a(0),u=a.n(d),m=a(71),p=a(457),f=a(244),h=a(73),w=a(72),b=a(76),v=a(21),E=a(63),g=a.n(E),y=a(23),k=a(64),L=a(16),M=a(22),S=a(82),D=a.n(S),O=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(r.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.props&&n.props.user&&n.props.user.id&&n.props.match&&n.props.match.params&&n.props.match.params.id)){e.next=4;break}return e.next=3,n.setState({class_id:n.props.match.params.id});case 3:n.getAssignmentList();case 4:case"end":return e.stop()}}),e)}))),n.createNotification=function(e,t){switch(e){case"info":k.NotificationManager.info(t,"",5e3);break;case"success":k.NotificationManager.success(t,"",5e3);break;case"warning":k.NotificationManager.warning(t,"",5e3);break;case"error":k.NotificationManager.error(t,"",5e3)}},n.state={isLoading:!1,downloadRowId:null,elem:{},showModal:!1,handleCloseModal:!1,isValid:{value:!1,text:""},data:[],class_id:"",title:""},n}return Object(l.a)(a,[{key:"openDownloadModal",value:function(e){this.setState({title:e.title,showModal:!0,downloadRowId:e.id,elem:e})}},{key:"closeDownloadModal",value:function(){this.setState({showModal:!1})}},{key:"goToSubmissions",value:function(e,t){e.preventDefault(),this.props.history.push("/faculty/class/".concat(t.class_id,"/assignment/").concat(t.id,"/submissions"))}},{key:"handleDownload",value:function(){var e=this;this.setState({showModal:!1,isLoading:!0}),g.a.get("".concat(y.a.prod,"/").concat(this.state.elem.file),{responseType:"blob"}).then((function(t){var a=e.state.elem.file.split(".");D()(t.data,"".concat(e.state.title,".").concat(a[a.length-1])),e.setState({isLoading:!1})}))}},{key:"getAssignmentList",value:function(){var e=this;this.setState({isLoading:!0}),g.a.get("".concat(y.a.prod,"/api/class/").concat(this.state.class_id,"/assignment/list")).then((function(t){e.setState({data:t.data.data,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1}),console.log("Error: getting data from db ",t.response),e.createNotification("error","Error while Getting data from db")}))}},{key:"cancelDownload",value:function(){this.setState({showModal:!1,title:""})}},{key:"render",value:function(){var e=this;return u.a.createElement(v.a,null,this.state.isLoading&&u.a.createElement(L.a,null),u.a.createElement(m.a,null,this.state.showModal&&u.a.createElement(p.a,{show:this.state.showModal,onHide:function(){return e.setState({showModal:!1})}},u.a.createElement(p.a.Header,{closeButton:!0},u.a.createElement(p.a.Title,null,"Download Confirm")),u.a.createElement(p.a.Body,null,"Are you sure to want to download ",u.a.createElement("b",null,this.state.title),"?"),u.a.createElement(p.a.Footer,null,u.a.createElement(f.a,{variant:"primary",onClick:function(){return e.handleDownload()}},"OK"),u.a.createElement(f.a,{variant:"secondary",onClick:function(){return e.cancelDownload()}},"Cancel"))),u.a.createElement(k.NotificationContainer,null),u.a.createElement(h.a,null,u.a.createElement(w.a,null,u.a.createElement(w.a.Header,null,u.a.createElement(w.a.Title,{as:"h5"},"Assignments List")),u.a.createElement(w.a.Body,null,u.a.createElement(m.a,null,u.a.createElement(h.a,null,u.a.createElement(b.a,{striped:!0,bordered:!0,hover:!0,responsive:!0},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",null,"Title"),u.a.createElement("th",null,"Total Marks"),u.a.createElement("th",null,"Submission Date"),u.a.createElement("th",null,"Actions"))),u.a.createElement("tbody",null,this.state.data.map((function(t,a){return u.a.createElement("tr",{key:a},u.a.createElement("td",null,t.title),u.a.createElement("td",null,t.total_marks),u.a.createElement("td",null,new Date(t.submission_date).toString()),u.a.createElement("td",null,u.a.createElement(f.a,{style:{width:"100%"},onClick:function(a){return e.openDownloadModal(t)},variant:"primary"},"Download"),u.a.createElement("br",null),u.a.createElement(f.a,{style:{width:"100%"},variant:"outline-primary",onClick:function(a){return e.goToSubmissions(a,t)}},"Check Submissions")))})))))))))))}}]),a}(u.a.Component);t.default=Object(M.b)((function(e){return{user:e.userDetails.user}}),null)(O)},76:function(e,t,a){"use strict";var n=a(4),o=a(7),r=a(56),s=a.n(r),l=a(0),i=a.n(l),c=a(57),d=i.a.forwardRef((function(e,t){var a=e.bsPrefix,r=e.className,l=e.striped,d=e.bordered,u=e.borderless,m=e.hover,p=e.size,f=e.variant,h=e.responsive,w=Object(o.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),b=Object(c.a)(a,"table"),v=s()(r,b,f&&b+"-"+f,p&&b+"-"+p,l&&b+"-striped",d&&b+"-bordered",u&&b+"-borderless",m&&b+"-hover"),E=i.a.createElement("table",Object(n.a)({},w,{className:v,ref:t}));if(h){var g=b+"-responsive";return"string"===typeof h&&(g=g+"-"+h),i.a.createElement("div",{className:g},E)}return E}));t.a=d},82:function(e,t){e.exports=function(e,t,a,n){var o=new Blob("undefined"!==typeof n?[n,e]:[e],{type:a||"application/octet-stream"});if("undefined"!==typeof window.navigator.msSaveBlob)window.navigator.msSaveBlob(o,t);else{var r=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(o):window.webkitURL.createObjectURL(o),s=document.createElement("a");s.style.display="none",s.href=r,s.setAttribute("download",t),"undefined"===typeof s.download&&s.setAttribute("target","_blank"),document.body.appendChild(s),s.click(),setTimeout((function(){document.body.removeChild(s),window.URL.revokeObjectURL(r)}),200)}}}}]);
//# sourceMappingURL=41.a8cdd091.chunk.js.map