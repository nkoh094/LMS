{"version":3,"sources":["store/actions/types/types.js","store/actions/userActions.js","Demo/Authentication/SignIn/SignIn1.js"],"names":["signIn","data","type","payload","signOut","SignUp1","props","facebookResponse","response","axios","post","config","prod","access_token","accessToken","then","result","localStorage","setItem","token","user","status","role","history","push","catch","err","console","log","createNotification","value","NotificationManager","info","success","warning","error","state","email","password","isValid","text","bind","getItem","this","event","setState","name","e","preventDefault","trim","length","a","msg","className","placeholder","onFocus","onChange","handleTextChange","target","Text","style","color","width","onClick","handleSubmit","appId","REACT_APP_FACEBOOK_APP_ID","autoLoad","fields","callback","render","renderProps","to","React","Component","connect","userDetails","actions"],"mappings":"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","file":"static/js/44.fdc5b092.chunk.js","sourcesContent":["\r\nexport const SIGN_IN = 'SIGN_IN';\r\nexport const SIGN_OUT = 'SIGN_OUT';","import {\r\n    SIGN_IN,\r\n    SIGN_OUT\r\n} from './types/types';\r\n\r\nexport const signIn = data => {\r\n    return {\r\n        type: SIGN_IN,\r\n        payload: data,\r\n    };\r\n};\r\n\r\nexport const signOut = () => {\r\n    return {\r\n        type: SIGN_OUT\r\n    }\r\n}","import React from 'react';\r\nimport './../../../assets/scss/style.scss';\r\nimport Aux from \"../../../hoc/_Aux\";\r\nimport { connect } from 'react-redux';\r\nimport { Form } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport config from '../../../config';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport * as actions from '../../../store/actions/userActions';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nclass SignUp1 extends React.Component {\r\n\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        email: '',\r\n        password: '',\r\n        isValid: {\r\n            value: false,\r\n            text: ''   \r\n        },\r\n      }\r\n      this.facebookResponse = this.facebookResponse.bind(this);\r\n    }\r\n\r\n    facebookResponse = (response) => {\r\n        axios.post(`${config.prod}/api/auth/facebook`, { access_token: response.accessToken })\r\n            .then(result => {\r\n                localStorage.setItem('lms-token', result.data.token);\r\n                this.props.signIn(result.data.user);\r\n                result.data.user.status ? result.data.user.role === 'user' ? this.props.history.push('/dashboard') : this.props.history.push('/home') : this.props.history.push('/verify/identity');\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n    };\r\n\r\n    componentDidMount() {\r\n        let local = localStorage.getItem('lms-token');\r\n        if (local) {\r\n            this.props.history.push('/dasboard');\r\n        }\r\n    }\r\n\r\n\r\n    handleTextChange(event) {\r\n        this.setState({ [event.name]: event.value });\r\n    }\r\n\r\n    handleSubmit(e) {\r\n        e.preventDefault();\r\n        const { email, password } = this.state;\r\n       \r\n        if (!email && email.trim().length <= 0) {\r\n            this.setState({ isValid: { value: true, text: 'Please enter valid Email', name: 'email' }});\r\n            return;\r\n        }\r\n\r\n        if (!password && password.trim().length <= 0) {\r\n            this.setState({ isValid: { value: true, text: 'Please enter valid Password', name: 'password' }});\r\n            return;\r\n        }\r\n        axios.post(`${config.prod}/api/user/signin`, { email: email.trim(), password: password.trim() })\r\n            .then(async result => {\r\n                await localStorage.setItem('lms-token', result.data.token);\r\n                await this.props.signIn(result.data.user);\r\n                result.data.user.status ? result.data.user.role === 'admin' ? this.props.history.push('/admin/dashboard') : result.data.user.role === 'user' ? this.props.history.push('/dashboard') : this.props.history.push('/home')  : this.props.history.push('/verify/identity');\r\n            })\r\n            .catch(err => {\r\n                console.log('Error: ', err.response);\r\n                if (err.response && err.response.status && (err.response.status === 404 || err.response.status === 400 || err.response.status === 401 || err.response.status === 500)) {\r\n                    this.setState({ isValid: { value: true, text: err.response.data.msg } });\r\n                    this.createNotification('error', err.response.data.msg);\r\n                } else {\r\n                    this.setState({ isValid: { value: true, text: 'Unknown Error' } });\r\n                    this.createNotification('error', 'Unknown Error');\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n    createNotification = (type, value) => {\r\n        switch (type) {\r\n            case 'info':\r\n                NotificationManager.info(value,'', 5000);\r\n                break;\r\n            case 'success':\r\n                NotificationManager.success(value, '', 5000);\r\n                break;\r\n            case 'warning':\r\n                NotificationManager.warning(value, '', 5000);\r\n                break;\r\n            case 'error':\r\n                NotificationManager.error(value, '', 5000);\r\n                break;\r\n            default: break;\r\n        }\r\n    };\r\n\r\n    render () {\r\n        return(\r\n            <Aux>\r\n                <NotificationContainer/>\r\n                <div className=\"auth-wrapper\">\r\n                    <div className=\"auth-content\">\r\n                        <div className=\"auth-bg\">\r\n                            <span className=\"r\"/>\r\n                            <span className=\"r s\"/>\r\n                            <span className=\"r s\"/>\r\n                            <span className=\"r\"/>\r\n                        </div>\r\n                        <div className=\"card\">\r\n                            <div className=\"card-body text-center\">\r\n                                <div className=\"mb-4\">\r\n                                    <i className=\"feather icon-unlock auth-icon\"/>\r\n                                </div>\r\n                                <h3 className=\"mb-4\">Login</h3>\r\n                                <div className=\"input-group mb-3\">\r\n                                    <input \r\n                                        type=\"email\" \r\n                                        className={this.state.isValid.value && this.state.isValid.name === 'email' ? 'form-control in-valid-input' : 'form-control'} \r\n                                        placeholder=\"Email\"\r\n                                        name=\"email\"\r\n                                        onFocus={() => this.setState({ isValid: { value: false, text: '', name: '' }})}\r\n                                        onChange={(e) => this.handleTextChange(e.target) }\r\n                                    />\r\n                                </div>\r\n                                <div className=\"input-group mb-4\">\r\n                                    <input \r\n                                        type=\"password\" \r\n                                        className={this.state.isValid.value && this.state.isValid.name === 'password' ? 'form-control in-valid-input' : 'form-control'} \r\n                                        placeholder=\"password\"\r\n                                        name=\"password\"\r\n                                        onFocus={() => this.setState({ isValid: { value: false, text: '', name: '' }})}\r\n                                        onChange={(e) => this.handleTextChange(e.target) }\r\n                                    />\r\n                                </div>\r\n                                <div className=\"form-group text-left\">\r\n                                    {\r\n                                        this.state.isValid.value ?\r\n                                        <Form.Text style={{ color: 'red' }}>\r\n                                            { this.state.isValid.text }\r\n                                        </Form.Text> : ''\r\n                                    }\r\n                                </div>\r\n                                <div>\r\n                                    <button style={{ width: '100%' }} className=\"btn btn-primary shadow-2 mb-4\" onClick={(e)=> this.handleSubmit(e)}>Login</button>\r\n                                </div>\r\n                                <div>\r\n                                    <FacebookLogin\r\n                                        appId={config.REACT_APP_FACEBOOK_APP_ID}\r\n                                        autoLoad={false}\r\n                                        fields=\"name,email,picture\"\r\n                                        callback={this.facebookResponse}\r\n                                        render={(renderProps) => (\r\n                                            <button style={{ width: '100%' }} className=\"btn btn-primary shadow-2 mb-4\" onClick={renderProps.onClick}>Facebook Login</button>\r\n                                        // <SocialButtons variant=\"facebook\" action={renderProps.onClick} />\r\n                                        )}\r\n                                    />\r\n                                </div>\r\n                                <p className=\"mb-0 text-muted\">Create an account? <NavLink to=\"/signup\">Signup</NavLink></p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </Aux>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        user: state.userDetails\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, actions)(SignUp1);"],"sourceRoot":""}