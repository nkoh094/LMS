(this["webpackJsonplms-react-app"]=this["webpackJsonplms-react-app"]||[]).push([[5],{146:function(e,t,a){"use strict";a.r(t);var i=a(9),s=a(10),n=a(12),l=a(11),o=a(0),c=a.n(o),r=a(244),d=a(457),u=a(71),m=a(73),h=a(72),E=a(74),p=a(21),f=a(63),v=a.n(f),g=(a(35),a(23)),b=a(64),S=a(16),k=a(98),w=function(e){Object(n.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).createNotification=function(e,t){switch(e){case"info":b.NotificationManager.info(t,"",5e3);break;case"success":b.NotificationManager.success(t,"",5e3);break;case"warning":b.NotificationManager.warning(t,"",5e3);break;case"error":b.NotificationManager.error(t,"",5e3)}},s.state={isLoading:!1,deletedRowId:null,showModal:!1,handleCloseModal:!1,title:"",status:!0,isValid:{value:!1,text:""},recordToUpdate:"",isEdit:!1,data:[],columns:[{Header:"Date Time",accessor:"updatedAt",Cell:function(e){return c.a.createElement("p",{className:"cell-custom"},k(e.value).format("MM/DD/YYYY HH:mm:ss"))}},{Header:"Job Title",accessor:"job_title",Cell:function(e){return c.a.createElement("p",{className:"cell-custom"},e.value)}},{Header:"Status",accessor:"active",Cell:function(e){return c.a.createElement("p",{className:"cell-custom"},e.value?"active":"inactive")}},{Header:"Actions",Cell:function(e){return c.a.createElement("div",{className:"action-btn"},c.a.createElement(r.a,{variant:"warning",onClick:function(){return s.handleEdit(e.original)}},"Edit"),c.a.createElement(r.a,{variant:"danger",onClick:function(){return s.openDeleteModal(e.original)}},"Delete"))}}]},s}return Object(s.a)(a,[{key:"handleTextChange",value:function(e){this.setState({title:e})}},{key:"handleEdit",value:function(e){this.setState({isEdit:!0,recordToUpdate:e.id,title:e.job_title,status:e.active})}},{key:"openDeleteModal",value:function(e){this.setState({isEdit:!1,title:e.job_title,status:!0,showModal:!0,deletedRowId:e.id})}},{key:"closeDeleteModal",value:function(){this.setState({showModal:!1})}},{key:"handleDelete",value:function(){var e=this;this.setState({showModal:!1,isLoading:!0}),v.a.delete("".concat(g.a.prod,"/api/choices/jobtitle/delete/").concat(this.state.deletedRowId),{data:{id:this.state.deletedRowId}}).then((function(t){e.createNotification("success","Job Title Deleted Successfully"),e.getJobTitleList(),e.setState({isLoading:!1,title:""})})).catch((function(t){e.setState({isLoading:!1,title:""}),console.log("Error: deleting data from db ",t.response),e.createNotification("error","Error while deleting data from db")}))}},{key:"componentDidMount",value:function(){this.getJobTitleList()}},{key:"getJobTitleList",value:function(){}},{key:"cancelEdit",value:function(){this.setState({isEdit:!1,title:""})}},{key:"cancelDelete",value:function(){this.setState({isEdit:!1,showModal:!1,title:""})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),0!==this.state.title.trim().length?this.state.isEdit?(this.setState({isLoading:!0}),v.a.put("".concat(g.a.prod,"/api/choices/jobtitle/update/").concat(this.state.recordToUpdate),{id:this.state.recordToUpdate,job_title:this.state.title,active:this.state.status}).then((function(e){t.setState({isEdit:!1,title:"",status:!0,isLoading:!1}),t.createNotification("success","Job Title Updated Successfully"),t.getJobTitleList()})).catch((function(e){console.log("Error: ",e.response),t.setState({isLoading:!1}),e.response&&e.response.status&&(409===e.response.status||400===e.response.status||500===e.response.status)?(t.setState({isValid:{value:!0,text:e.response.data.msg}}),t.createNotification("error",e.response.data.msg)):(t.setState({isValid:{value:!0,text:"Unknown Error"}}),t.createNotification("error","Unknown Error"))}))):(this.setState({isLoading:!0}),v.a.post("".concat(g.a.prod,"/api/choices/jobtitle/create"),{job_title:this.state.title,active:this.state.status}).then((function(e){t.setState({isEdit:!1,title:"",status:!0,isLoading:!1}),t.createNotification("success","Job Title Created Successfully"),t.getJobTitleList()})).catch((function(e){console.log("Error: ",e.response),t.setState({isLoading:!1}),e.response&&e.response.status&&(409===e.response.status||400===e.response.status||500===e.response.status)?(t.setState({isValid:{value:!0,text:e.response.data.msg}}),t.createNotification("error",e.response.data.msg)):(t.setState({isValid:{value:!0,text:"Unknown Error"}}),t.createNotification("error","Unknown Error"))}))):this.setState({isValid:{value:!0,text:"Please enter valid title"}})}},{key:"render",value:function(){var e=this;return c.a.createElement(p.a,null,this.state.isLoading&&c.a.createElement(S.a,null),this.state.showModal&&c.a.createElement(d.a,{show:this.state.showModal,onHide:this.state.handleCloseModal},c.a.createElement(d.a.Header,{closeButton:!0},c.a.createElement(d.a.Title,null,"Delete Confirm")),c.a.createElement(d.a.Body,null,"Are you sure to want to delete ",this.state.title," "),c.a.createElement(d.a.Footer,null,c.a.createElement(r.a,{variant:"primary",onClick:function(){return e.handleDelete(e.state.deletedRowId)}},"OK"),c.a.createElement(r.a,{variant:"secondary",onClick:function(){return e.cancelDelete()}},"Cancel"))),c.a.createElement(u.a,null,c.a.createElement(b.NotificationContainer,null),c.a.createElement(m.a,null,c.a.createElement(h.a,null,c.a.createElement(h.a.Header,null,c.a.createElement(h.a.Title,{as:"h5"},this.state.isEdit?"Edit":"Create"," Job Title")),c.a.createElement(h.a.Body,null,c.a.createElement(u.a,null,c.a.createElement(E.a,{className:"col-md-12",onSubmit:function(t){return e.handleSubmit(t)}},c.a.createElement("fieldset",{disabled:this.state.isLoading,className:this.state.isLoading?"opacity-5":""},c.a.createElement(E.a.Row,null,c.a.createElement(m.a,{md:4,lg:5},c.a.createElement(E.a.Group,{className:"mb-2",controlId:"formBasicEmail"},c.a.createElement(E.a.Label,null,"Title"),c.a.createElement(E.a.Control,{type:"text",name:"title",placeholder:"Job Title",value:this.state.title,className:this.state.isValid.value?"in-valid-input":"",onFocus:function(){return e.setState({isValid:{value:!1,text:""}})},onChange:function(t){return e.handleTextChange(t.target.value)}}),this.state.isValid.value?c.a.createElement(E.a.Text,{style:{color:"red"}},this.state.isValid.text):"")),c.a.createElement(m.a,{md:4,lg:3},c.a.createElement(E.a.Group,{className:"mb-2",controlId:"status"},c.a.createElement("div",null," ",c.a.createElement(E.a.Label,null,"Status")," "),c.a.createElement("div",{className:"rg-pad"},c.a.createElement(E.a.Check,{inline:!0,custom:!0,type:"radio",checked:this.state.status,onChange:function(){return e.setState({status:!0})},label:"Active",name:"active",id:"supportedRadio21"}),c.a.createElement(E.a.Check,{inline:!0,custom:!0,type:"radio",label:"Inactive",checked:!this.state.status,onChange:function(){return e.setState({status:!1})},name:"active",id:"supportedRadio22"})))),c.a.createElement(m.a,{md:4,lg:4},c.a.createElement("div",null,c.a.createElement(r.a,{type:"submit",className:"mt-4",variant:this.state.isEdit?"warning":"primary"},this.state.isEdit?"Edit":"Submit"),this.state.isEdit?c.a.createElement(r.a,{className:"mt-4",onClick:function(){return e.cancelEdit()},variant:"info"},"Cancel"):"")))))))))))}}]),a}(c.a.Component);t.default=w}}]);
//# sourceMappingURL=5.ca3328fc.chunk.js.map