(this["webpackJsonplms-react-app"]=this["webpackJsonplms-react-app"]||[]).push([[57],{410:function(e,t,a){"use strict";a.r(t);var n=a(67),s=a.n(n),r=a(68),i=a(9),l=a(10),o=a(12),c=a(11),u=a(0),m=a.n(u),d=a(71),p=a(73),h=a(72),f=a(74),v=a(244),E=a(21),g=a(63),b=a.n(g),x=a(23),w=a(64),y=a(16),N=a(22),T=function(e){Object(o.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).componentDidMount=Object(r.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),n.createNotification=function(e,t){switch(e){case"info":w.NotificationManager.info(t,"",5e3);break;case"success":w.NotificationManager.success(t,"",5e3);break;case"warning":w.NotificationManager.warning(t,"",5e3);break;case"error":w.NotificationManager.error(t,"",5e3)}},n.state={isLoading:!1,deletedRowId:null,showModal:!1,handleCloseModal:!1,name:"",description:"",isValid:{value:!1,text:""}},n}return Object(l.a)(a,[{key:"handleTextChange",value:function(e){this.setState({[e.name]:e.value})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.name,s=a.description;!n&&n.trim().length<=0?this.setState({isValid:{value:!0,text:"Please enter valid Topic Name",name:"name"}}):!s&&s.trim().length<=0?this.setState({isValid:{value:!0,text:"Please enter valid Topic Description",name:"description"}}):b.a.post("".concat(x.a.prod,"/api/topic/create"),{name:n.trim(),description:s.trim(),type:!1,user_id:this.props.user.id}).then((function(e){t.props.history.push("/faculty/class/list")})).catch((function(e){console.log("Error: ",e.response),e.response&&e.response.status&&(400===e.response.status||500===e.response.status)?(console.log(e.response.data),500===e.response.status&&"SequelizeUniqueConstraintError"===e.response.data.error.name?t.setState({isValid:{value:!0,text:"Topic with this name already exist",name:"server_error"}}):t.setState({isValid:{value:!0,text:e.response.data.msg,name:"server_error"}})):t.setState({isValid:{value:!0,text:"Unknown Error",name:"server_error"}})}))}},{key:"render",value:function(){var e=this;return m.a.createElement(E.a,null,this.state.isLoading&&m.a.createElement(y.a,null),m.a.createElement(d.a,null,m.a.createElement(w.NotificationContainer,null),m.a.createElement(p.a,null,m.a.createElement(h.a,null,m.a.createElement(h.a.Header,null,m.a.createElement(h.a.Title,{as:"h5"},"Add Topic for General Discussion")),m.a.createElement(h.a.Body,null,m.a.createElement(d.a,null,m.a.createElement(f.a,{className:"col-md-12",onSubmit:function(t){return e.handleSubmit(t)}},m.a.createElement("fieldset",{disabled:this.state.isLoading,className:this.state.isLoading?"opacity-5":""},m.a.createElement(f.a.Row,null,m.a.createElement(p.a,{md:{span:8,offset:2}},m.a.createElement(f.a.Group,{className:"mb-2",controlId:"formBasicEmail"},m.a.createElement(f.a.Label,null,"Topic Name"),m.a.createElement(f.a.Control,{type:"text",name:"name",placeholder:"Topic Name",value:this.state.name,className:this.state.isValid.value&&"name"===this.state.isValid.name?"in-valid-input":"",onFocus:function(){return e.setState({isValid:{value:!1,text:""}})},onChange:function(t){return e.handleTextChange(t.target)}})))),m.a.createElement(f.a.Row,null,m.a.createElement(p.a,{md:{span:8,offset:2}},m.a.createElement(f.a.Group,{controlId:"exampleForm.ControlTextarea1"},m.a.createElement(f.a.Label,null,"Topic Description"),m.a.createElement(f.a.Control,{as:"textarea",name:"description",rows:4,value:this.state.description,className:this.state.isValid.value&&"description"===this.state.isValid.name?"in-valid-input":"",onFocus:function(){return e.setState({isValid:{value:!1,text:""}})},onChange:function(t){return e.handleTextChange(t.target)}})))),m.a.createElement(f.a.Row,null,m.a.createElement(p.a,{md:{span:8,offset:2}},m.a.createElement("div",null,m.a.createElement(v.a,{type:"submit",style:{marginTop:"1.8rem",width:"100%"},variant:"primary"},"Submit"),this.state.isValid.value?m.a.createElement(f.a.Text,{style:{color:"red"}},this.state.isValid.text):"")))))))))))}}]),a}(m.a.Component);t.default=Object(N.b)((function(e){return{user:e.userDetails.user}}),null)(T)}}]);
//# sourceMappingURL=57.ac55de21.chunk.js.map